{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.js","components/Modal/Modal.js","components/Button/Button.js","apiService/apiService.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","App.js","index.js"],"names":["module","exports","ImageGalleryItem","drawData","openModal","map","id","webformatURL","onClick","className","styles","image_gallery__item","src","alt","image_gallery_image","modalRoot","document","getElementById","Modal","children","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","e","code","createPortal","modal_backdrop","currentTarget","target","modal_content","Button","type","button_more","ApiService","URL","key","this","_searchQuery","_page","_perPage","orientation","value","a","query","axios","get","result","console","log","data","ApiServiceObj","ImageGallery","searchValue","useState","fetchedImgs","setFetchedImgs","status","setStatus","modalImgId","setModalImgId","isModalOpen","setIsModalOpen","loadMoreParam","setLoadMoreParam","doLoadMore","pageNum","perPageVal","totalPics","trim","resetPage","searchQuery","fetchImages","then","res","total","hits","catch","err","color","height","width","timeout","image_gallery","Number","incPageNumber","_searchValue","searchResults","prev","scrollTo","top","documentElement","scrollHeight","behavior","modalImg","find","largeImageURL","SearchBar","getSearchValueBar","setSearchValue","searchbar","search_form","onSubmit","preventDefault","search_form__button","search_form__label","search_form__input","name","autoComplete","autoFocus","onChange","placeholder","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.98dfe4ee.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery__item\":\"ImageGalleryItem_image_gallery__item__2GbDb\",\"image_gallery_image\":\"ImageGalleryItem_image_gallery_image__3Do92\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__2a4NN\",\"modal_content\":\"Modal_modal_content__3EhHG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery\":\"ImageGallery_image_gallery__3_LcZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button_more\":\"Button_button_more__1zsiO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3gZPg\",\"search_form\":\"Searchbar_search_form__GFvp5\",\"search_form__button\":\"Searchbar_search_form__button__2UA0a\",\"search_form__label\":\"Searchbar_search_form__label__3KIUM\",\"search_form__input\":\"Searchbar_search_form__input__3HqIQ\"};","import styles from \"./ImageGalleryItem.module.css\";\n\nexport default function ImageGalleryItem({ drawData, openModal }) {\n  return (\n    <>\n      {drawData.map(({ id, webformatURL }) => {\n        return (\n          <li\n            key={id}\n            id={id}\n            onClick={openModal}\n            className={styles.image_gallery__item}\n          >\n            <img\n              src={webformatURL}\n              alt=\"some pic\"\n              className={styles.image_gallery_image}\n            />\n          </li>\n        );\n      })}\n    </>\n  );\n}\n","import { useEffect } from \"react\";\nimport styles from \"./Modal.module.css\";\nimport { createPortal } from \"react-dom\";\n\nconst modalRoot = document.getElementById(\"modal-root\");\n\nexport default function Modal({ children, onClose }) {\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  });\n\n  const handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      onClose();\n    }\n  };\n\n  const handleBackdropClick = (e) => {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={styles.modal_backdrop} onClick={handleBackdropClick}>\n      <div className={styles.modal_content}>{children}</div>\n    </div>,\n    modalRoot\n  );\n}\n","import styles from \"./Button.module.css\";\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" onClick={onClick} className={styles.button_more}>\n      Load more\n    </button>\n  );\n}\n","import axios from \"axios\";\n\nexport default class ApiService {\n  constructor(URL, key) {\n    this.URL = URL;\n    this.key = key;\n    this._searchQuery = \"\";\n    this._page = 1;\n    this._perPage = 12;\n    this.orientation = \"horizontal\";\n    this.type = \"photo\";\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page = value);\n  }\n\n  get perPage() {\n    return this._perPage;\n  }\n  set perPage(value) {\n    return (this._perPage = value);\n  }\n\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  incPageNumber() {\n    this._page += 1;\n  }\n\n  async fetchImages() {\n    const query = `${this.URL}?key=${this.key}&page=${this._page}&per_page=${this._perPage}\n        &orientation=${this.orientation}&image_type=${this.type}&q=${this._searchQuery}`;\n    try {\n      const result = await axios.get(query);\n      console.log(\"result.data :>> \", result.data);\n      return result.data;\n    } catch (err) {\n      return err;\n    }\n  }\n}\n","import styles from \"./ImageGallery.module.css\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport Modal from \"../Modal/Modal\";\nimport Button from \"../Button/Button\";\nimport ApiService from \"../../apiService/apiService\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { useEffect, useState } from \"react\";\n\n//ApiService\nconst URL = \"https://pixabay.com/api/\";\nconst key = \"23099756-b59a1c1cdbe94bc1dac04ed03\";\nconst ApiServiceObj = new ApiService(URL, key);\n\nexport default function ImageGallery({ searchValue }) {\n  const [fetchedImgs, setFetchedImgs] = useState([]);\n  const [status, setStatus] = useState(\"init\");\n  const [modalImgId, setModalImgId] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [loadMoreParam, setLoadMoreParam] = useState(false);\n\n  const doLoadMore = (pageNum, perPageVal, totalPics) => {\n    pageNum * perPageVal < totalPics\n      ? setLoadMoreParam(true)\n      : setLoadMoreParam(false);\n  };\n\n  useEffect(() => {\n    if (!searchValue.trim()) return;\n    setStatus(\"pending\");\n    ApiServiceObj.resetPage();\n    ApiServiceObj.searchQuery = searchValue;\n    console.log(`searchValue in useEffect`, searchValue);\n    ApiServiceObj.fetchImages()\n      .then((res) => {\n        doLoadMore(ApiServiceObj._page, ApiServiceObj._perPage, res.total);\n        setFetchedImgs(res.hits);\n        setStatus(\"success\");\n      })\n      .catch((err) => {\n        console.log(err);\n        setStatus(\"error\");\n      });\n  }, [searchValue]);\n\n  const handleClick = () => {\n    ApiServiceObj.searchQuery = searchValue;\n    console.log(`page in loadMore before`, ApiServiceObj._page);\n    ApiServiceObj.incPageNumber();\n    console.log(`searchValue in loadMore`, ApiServiceObj._searchValue);\n    console.log(`page in loadMore after`, ApiServiceObj._page);\n    ApiServiceObj.fetchImages()\n      .then((searchResults) => {\n        doLoadMore(\n          ApiServiceObj._page,\n          ApiServiceObj._perPage,\n          searchResults.total\n        );\n        console.log(`searchResults.hits`, searchResults.hits);\n        setFetchedImgs((prev) => [...prev, ...searchResults.hits]);\n        setStatus(\"success\");\n      })\n      .then(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        setStatus(\"error\");\n      });\n  };\n\n  //Modal handling\n  const modalImg = () => {\n    const modalImg = fetchedImgs.find((fetchedImgs) => {\n      return fetchedImgs.id === modalImgId;\n    });\n    console.log(`modalImg`, modalImg.largeImageURL);\n    return modalImg.largeImageURL;\n  };\n\n  const openModal = (e) => {\n    setIsModalOpen(true);\n    setModalImgId(Number(e.currentTarget.id));\n  };\n\n  const closeModal = () => {\n    setIsModalOpen(false);\n  };\n\n  // return (\n  if (status === \"init\") {\n    return <h2>Awaiting for your query...</h2>;\n  }\n  if (status === \"pending\") {\n    return (\n      <div>\n        <Loader\n          type=\"BallTriangle\"\n          color=\"yellowgreen\"\n          height={200}\n          width={200}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n  if (status === \"success\") {\n    return (\n      <>\n        <ul className={styles.image_gallery}>\n          <ImageGalleryItem drawData={fetchedImgs} openModal={openModal} />\n        </ul>\n        {loadMoreParam ? <Button onClick={handleClick} /> : \"\"}\n        {isModalOpen && (\n          <Modal modalImgId={modalImgId} onClose={closeModal}>\n            <img src={modalImg()} alt=\"some pic\" />\n          </Modal>\n        )}\n      </>\n    );\n  }\n  // )\n}\n","import { useState } from \"react\";\nimport styles from \"./Searchbar.module.css\";\n\nexport default function SearchBar({ getSearchValueBar }) {\n  const [searchValue, setSearchValue] = useState(\"\");\n  const handleSearchChange = (e) => {\n    setSearchValue(e.target.value);\n  };\n\n  const handleSearchSubmit = (e) => {\n    e.preventDefault();\n    getSearchValueBar(searchValue);\n    setSearchValue(\"\");\n  };\n\n  return (\n    <header className={styles.searchbar}>\n      <form className={styles.search_form} onSubmit={handleSearchSubmit}>\n        <button type=\"submit\" className={styles.search_form__button}>\n          <span className={styles.search_form__label}></span>\n        </button>\n\n        <input\n          className={styles.search_form__input}\n          name=\"searchValue\"\n          value={searchValue}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          onChange={handleSearchChange}\n          placeholder=\"Enter your goal ...\"\n        />\n      </form>\n    </header>\n  );\n}\n","import \"./App.css\";\nimport { useState } from \"react\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport SearchBar from \"./components/Searchbar/Searchbar\";\n\nexport default function App() {\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const getSearchValue = (searchValue) => {\n    setSearchValue(searchValue);\n  };\n\n  return (\n    <>\n      <SearchBar getSearchValueBar={getSearchValue} />\n      <ImageGallery searchValue={searchValue} />\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}