(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,a){e.exports={image_gallery__item:"ImageGalleryItem_image_gallery__item__2GbDb",image_gallery_image:"ImageGalleryItem_image_gallery_image__3Do92"}},13:function(e,t,a){e.exports={modal_backdrop:"Modal_modal_backdrop__2a4NN",modal_content:"Modal_modal_content__3EhHG"}},24:function(e,t,a){e.exports={image_gallery:"ImageGallery_image_gallery__3_LcZ"}},25:function(e,t,a){e.exports={button_more:"Button_button_more__1zsiO"}},35:function(e,t,a){},36:function(e,t,a){},5:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3gZPg",search_form:"Searchbar_search_form__GFvp5",search_form__button:"Searchbar_search_form__button__2UA0a",search_form__label:"Searchbar_search_form__label__3KIUM",search_form__input:"Searchbar_search_form__input__3HqIQ"}},78:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(9),o=a.n(c),s=(a(35),a(4)),i=(a(36),a(15)),u=a(24),l=a.n(u),_=a(12),h=a.n(_),g=a(0);function m(e){var t=e.drawData,a=e.openModal;return Object(g.jsx)(g.Fragment,{children:t.map((function(e){var t=e.id,n=e.webformatURL;return Object(g.jsx)("li",{id:t,onClick:a,className:h.a.image_gallery__item,children:Object(g.jsx)("img",{src:n,alt:"some pic",className:h.a.image_gallery_image})},t)}))})}var b=a(13),f=a.n(b),d=document.getElementById("modal-root");function p(e){var t=e.children,a=e.onClose;Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&a()};return Object(c.createPortal)(Object(g.jsx)("div",{className:f.a.modal_backdrop,onClick:function(e){e.currentTarget===e.target&&a()},children:Object(g.jsx)("div",{className:f.a.modal_content,children:t})}),d)}var j=a(25),O=a.n(j);function y(e){var t=e.onClick;return Object(g.jsx)("button",{type:"button",onClick:t,className:O.a.button_more,children:"Load more"})}var v=a(14),x=a.n(v),k=a(26),w=a(27),I=a(28),N=a(29),S=a.n(N),P=function(){function e(t,a){Object(w.a)(this,e),this.URL=t,this.key=a,this._searchQuery="",this._page=1,this._perPage=12,this.orientation="horizontal",this.type="photo"}return Object(I.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page=e}},{key:"perPage",get:function(){return this._perPage},set:function(e){return this._perPage=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"incPageNumber",value:function(){this._page+=1}},{key:"fetchImages",value:function(){var e=Object(k.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.URL,"?key=").concat(this.key,"&page=").concat(this._page,"&per_page=").concat(this._perPage,"\n        &orientation=").concat(this.orientation,"&image_type=").concat(this.type,"&q=").concat(this._searchQuery),e.prev=1,e.next=4,S.a.get(t);case 4:return a=e.sent,console.log("result.data :>> ",a.data),e.abrupt("return",a.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),E=a(30),C=a.n(E),L=(a(77),new P("https://pixabay.com/api/","23099756-b59a1c1cdbe94bc1dac04ed03"));function M(e){var t=e.searchValue,a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)("init"),_=Object(s.a)(u,2),h=_[0],b=_[1],f=Object(n.useState)(null),d=Object(s.a)(f,2),j=d[0],O=d[1],v=Object(n.useState)(!1),x=Object(s.a)(v,2),k=x[0],w=x[1],I=Object(n.useState)(!1),N=Object(s.a)(I,2),S=N[0],P=N[1],E=function(e,t,a){P(e*t<a)};Object(n.useEffect)((function(){t.trim()&&(b("pending"),L.resetPage(),L.searchQuery=t,console.log("searchValue in useEffect",t),L.fetchImages().then((function(e){E(L._page,L._perPage,e.total),o(e.hits),b("success")})).catch((function(e){console.log(e),b("error")})))}),[t]);return"init"===h?Object(g.jsx)("h2",{children:"Awaiting for your query..."}):"pending"===h?Object(g.jsx)("div",{children:Object(g.jsx)(C.a,{type:"BallTriangle",color:"yellowgreen",height:200,width:200,timeout:3e3})}):"success"===h?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:l.a.image_gallery,children:Object(g.jsx)(m,{drawData:c,openModal:function(e){w(!0),O(Number(e.currentTarget.id))}})}),S?Object(g.jsx)(y,{onClick:function(){L.searchQuery=t,console.log("page in loadMore before",L._page),L.incPageNumber(),console.log("searchValue in loadMore",L._searchValue),console.log("page in loadMore after",L._page),L.fetchImages().then((function(e){E(L._page,L._perPage,e.total),console.log("searchResults.hits",e.hits),o((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.hits))})),b("success")})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){console.log(e),b("error")}))}}):"",k&&Object(g.jsx)(p,{modalImgId:j,onClose:function(){w(!1)},children:Object(g.jsx)("img",{src:function(){var e=c.find((function(e){return e.id===j}));return console.log("modalImg",e.largeImageURL),e.largeImageURL}(),alt:"some pic"})})]}):void 0}var Q=a(5),V=a.n(Q);function U(e){var t=e.getSearchValueBar,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(g.jsx)("header",{className:V.a.searchbar,children:Object(g.jsxs)("form",{className:V.a.search_form,onSubmit:function(e){e.preventDefault(),t(c),o("")},children:[Object(g.jsx)("button",{type:"submit",className:V.a.search_form__button,children:Object(g.jsx)("span",{className:V.a.search_form__label})}),Object(g.jsx)("input",{className:V.a.search_form__input,name:"searchValue",value:c,type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){o(e.target.value)},placeholder:"Enter your goal ..."})]})})}function B(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(U,{getSearchValueBar:function(e){r(e)}}),Object(g.jsx)(M,{searchValue:a})]})}o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(B,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.98dfe4ee.chunk.js.map